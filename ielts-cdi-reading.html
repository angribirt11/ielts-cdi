<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS CDI Reading Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            font-size: 16px;
            line-height: 1.4;
            color: #333;
            background-color: #ffffff;
        }

        body::after {
            content: "@IELTS_PAPERS";
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-20deg);
            font-size: 72px;
            color: #000;
            opacity: 0.02;
            pointer-events: none;
            z-index: 9999;
        }

        #header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: #fff;
            border-bottom: 1px solid #e0e0e0;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }

        #timer-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #timer {
            font-size: 18px;
            font-weight: bold;
        }

        #timer-toggle, #timer-reset {
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
        }

        #passage-header-container {
            margin-top: 60px;
            padding: 15px 20px;
            background: #f5f5f5;
            border-bottom: 1px solid #e0e0e0;
        }

        .part-header {
            margin-bottom: 10px;
        }

        .main-container {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 60px);
        }

        .panels-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-panel {
            flex: 1;
            overflow-y: auto;
            padding: 20px 20px 100px;
            min-width: 200px;
        }

        .reading-passage p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .resizer {
            width: 10px;
            cursor: col-resize;
            background: #f5f5f5;
            border-left: 1px solid #e0e0e0;
            border-right: 1px solid #e0e0e0;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .resizer div {
            width: 4px;
            height: 30px;
            background: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 30"%3E%3Ccircle cx="2" cy="5" r="2" fill="%23666"/%3E%3Ccircle cx="2" cy="15" r="2" fill="%23666"/%3E%3Ccircle cx="2" cy="25" r="2" fill="%23666"/%3E%3C/svg%3E') center/contain no-repeat;
        }

        .questions-panel {
            flex: 1;
            overflow-y: auto;
            padding: 20px 20px 100px;
            border-left: 1px solid #e0e0e0;
            min-width: 200px;
        }

        .question {
            margin-bottom: 25px;
        }

        .answer-input {
            width: 100%;
            max-width: 400px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .inline-input {
            width: 120px;
            padding: 4px 8px;
            margin: 0 5px;
        }

        .tf-question {
            margin-bottom: 25px;
        }

        .tf-question-line {
            display: flex;
            margin-bottom: 15px;
        }

        .tf-question-number {
            min-width: 40px;
        }

        .tf-question-text {
            flex: 1;
        }

        .tf-options {
            display: flex;
            gap: 20px;
            margin-left: 40px;
        }

        .matching-question-container {
            margin-bottom: 25px;
        }

        .matching-options-bank {
            display: flex;
            gap: 10px;
            padding: 15px;
            background: #f9f9f9;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .drag-item {
            padding: 8px 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: move;
        }

        .drag-item.dragging {
            opacity: 0.5;
        }

        .drop-zone {
            min-width: 80px;
            min-height: 40px;
            border: 2px dashed #ccc;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fafafa;
            padding: 5px;
            text-align: center;
        }

        .drop-zone.drag-over {
            background: #e0e0e0;
        }

        .drop-zone.filled {
            background: #e8f4f8;
            border-color: #4a90e2;
        }

        .matching-question-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        #bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: #fff;
            border-top: 1px solid #e0e0e0;
            z-index: 100;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        #bottom-nav > div:first-child {
            display: flex;
            gap: 10px;
        }

        #bottom-nav #question-nav {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        #submit-btn {
            background: #4a90e2;
            color: white;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        #submit-btn:hover {
            background: #357abd;
        }

        .part-btn {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            background: #f5f5f5;
        }

        .part-btn.active {
            background: #4a90e2;
            color: white;
            border-color: #4a90e2;
        }

        .question-btn {
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            min-width: 30px;
            text-align: center;
        }

        .question-btn.answered {
            background: #d4edda;
            border-color: #28a745;
        }

        .flash {
            animation: flash 0.5s;
        }

        @keyframes flash {
            0% { background-color: #fff; }
            50% { background-color: #e0e0e0; }
            100% { background-color: #fff; }
        }

        .correct {
            border-color: #28a745 !important;
            background-color: #d4edda !important;
        }

        .incorrect {
            border-color: #dc3545 !important;
            background-color: #f8d7da !important;
        }

        .highlighted-text {
            background-color: yellow;
        }
    </style>
</head>
<body>
    <div id="header">
        <div id="timer-container">
            <span id="timer">60:00</span>
            <button id="timer-toggle">⏸</button>
            <button id="timer-reset">↻</button>
        </div>
        <a href="https://t.me/IELTS_PAPERS" target="_blank">@IELTS_PAPERS</a>
    </div>

    <div id="passage-header-container">
        <div id="part-header-1" class="part-header" style="display: block;">
            <p><strong>Part 1</strong></p>
            <p>Read the text and answer questions 1-13.</p>
        </div>
        <div id="part-header-2" class="part-header" style="display: none;">
            <p><strong>Part 2</strong></p>
            <p>Read the text and answer questions 14-26.</p>
        </div>
        <div id="part-header-3" class="part-header" style="display: none;">
            <p><strong>Part 3</strong></p>
            <p>Read the text and answer questions 27-40.</p>
        </div>
    </div>

    <div class="main-container">
        <div class="panels-container">
            <div class="passage-panel" id="passage-panel">
                <div id="passage-text-1" class="reading-passage" style="display: block;">
                    <h4 class="text-center">Dust and the American West</h4>
                    <p style="margin-bottom: 15px; text-align: justify;"><strong>A</strong> Images of deserts in the United States show dusty, barren landscapes, but the land may not always have been this way. Ever since settlers moved west across the US there has been dust-clouds of it everywhere. It was part of the landscape, or so it seemed to them. But there were no records of the landscape of the West until the settlers arrived. Now evidence is starting to emerge which suggests that before the settlers, there was very little dust.</p>
                    <p style="margin-bottom: 15px; text-align: justify;"><strong>B</strong> The evidence comes from the San Juan mountains of southwest Colorado, downwind of Arizona and New Mexico. There Jason Neff, a geochemist from the University of Colorado, has been analyzing sediments, the sand, stones and mud, laid down over the past 5000 years. Atmospheric dust was minimal throughout those five millennia until the mid-19th century, he says, but then, 'from about 1860 to 1900, dust deposition rates shot up.'</p>
                    <p style="margin-bottom: 15px; text-align: justify;"><strong>C</strong> This is surprising because usually dry means dusty, and the American West has almost always been dry—often drier than today. There was a near-permanent drought between 900 and 1300 which was so intense that it destroyed a series of native American civilizations, including the Anasazi, whose cliff homes are now US national treasures. Yet the evidence from the San Juan lakes is that it was not dusty. Even as their civilization was collapsing, the Anasazi seem to have protected their soils from erosion.</p>
                    <p style="margin-bottom: 15px; text-align: justify;"><strong>D</strong> This was not the case with the European settlers once they brought their cows. The landscape the cattle were introduced to was remarkably ill-equipped to cope with grazing animals, says Neff. 'Unlike most other parts of the US, there were few grazers in the American Southwest until the Europeans came. No bison and few antelope or deer.'</p>
                    <p style="margin-bottom: 15px; text-align: justify;"><strong>E</strong> In the Great Plains to the east and north, bison roamed in vast herds. Their regular grazing had created tough grass, while the herds manured the soil. In the Southwest, the land had few defenses against a sudden invasion of millions of livestock, whose teeth stripped the grass and whose hooves punctured the hard crust of desert soils that protected them from the wind. The invasion was sudden, funded by a bubble of speculative investment, much of it from Britain. The money went into railroads, and herds of cattle and sheep that rode the rails to the wide open pastures. By 1900, when sedimentation rates peaked, there were 20 million cattle and 25 million sheep in the West.</p>
                    <p style="margin-bottom: 15px; text-align: justify;"><strong>F</strong> One of the biggest ranches was owned by the Aztec Land and Cattle Company, which owned a million acres of land by 1884. Each acre had cost the company a mere 50 cents, and like many other speculators, it was only interested in quick profits and had little incentive to protect the soils from overgrazing. By the time Aztec sold the ranch in 1901, it was barren, with cattle carcasses scattered across the exhausted land. Such was the damage to the grasslands that even now few of the pastures have recovered. The parched and exposed soil simply blew away. The 1862 Homestead Act was passed in order to encourage the populating of the West. Any family willing to make the journey was entitled to claim 160 acres and farm it. Yet by the time people moved west in large numbers, the cattle companies had taken most of the land and surrounded it with barbed wire. The water sources were therefore cut off, and were aggressively guarded. It was only in the 1930s, with the passage of the Taylor Grazing Act, that federal authorities finally sought to limit cattle herds.</p>
                    <p style="margin-bottom: 15px; text-align: justify;"><strong>G</strong> Soil scientists have known for a while about the importance of the hard crust that forms on arid soils. 'These crusts can survive winds of up to a hundred miles an hour, but cattle hooves break the crust,' says Jayne Belnap, a soil ecologist at the US Geographical Survey, Utah. The scale of the dust clouds created by the livestock invasion has until now been largely unknown. When Neff first discovered dust in Colorado lake sediments laid down in the 19th century, he was initially unsure where it came from. Maybe it had crossed the Pacific from China's Gobi Desert.</p>
                    <p style="margin-bottom: 15px; text-align: justify;"><strong>H</strong> But after investigating the size and chemical composition of the dust, Neff was clear that it mostly came from the American Southwest, mainly Arizona and New Mexico. Now, with the soil crusts gone, dust clouds still head north and are having significant ecological effects in the Colorado mountains. They carry nutrients with them into areas which previously evolved and survived without them. But perhaps the most dramatic impact of the dust has been on snowfields in the Rocky Mountain Range. Even a thin sprinkling of dark material means snow absorbs more solar radiation, meaning that snowmelt occurs far more rapidly during springtime. The impact on the ski tourism industry is obvious.</p>
                    <p style="margin-bottom: 15px; text-align: justify;"><strong>I</strong> The loss of snow and the shrinking of glaciers across the American West in the past century has been dramatic. Glacier National Park in Montana, for example, has lost three quarters of its snow cover since 1910. All this is frequently attributed to global warming. While this almost certainly plays a role, Neff's findings suggest that dust may also contribute.</p>
                </div>
                <div id="passage-text-2" class="reading-passage" style="display: none;">
                    <h4 class="text-center">Urban Regeneration: an award-winning redevelopment project in Berlin</h4>
                    <p style="margin-bottom: 15px; text-align: justify;">Just over a kilometer south of Berlin's Potsdamer Platz, near the left bank of the Landwehr Canal, an extensive, triangular-shaped area of waste ground once separated the neighbourhoods of Kreuzberg to the east and Schöneberg to the west. Known as Gleisdreieck, meaning 'triangle of rails', it was formed by the intersection of different railway lines built in the mid-nineteenth century that entered Berlin from the south. Tracks, sheds and warehouses belonging to three old railway stations – Dresdner Bahnhof (1875–1882), Potsdamer Bahnhof (1838–1944) and Anhalter Bahnhof (1839–1952) – are situated on a raised area some twenty hectares in size, at a height of four metres above the surrounding ground level.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">As the railway infrastructure gradually ceased to be used, the whole area of Gleisdreieck became increasingly run down and abandoned, to the point of being used as a rubbish tip after 1945. Meanwhile, vegetation took over, turning it into a surprising, natural haven in the middle of built-up areas. The closeness of the wall which divided the city of Berlin between 1961 and 1990 also contributed to the fact that Gleisdreieck was for decades clearly identified as no-man's-land. Only a station of the same name in Berlin's underground railway system testified to its existence.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">Shortly before the fall of the Berlin Wall, however, the German Museum of Technology was established there, attracting large numbers of visitors and giving visibility to the site. More importantly, the unification of the formerly divided city gave the zone more centrality, at which point it became imperative to identify a purpose for it.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">After 2006, the State of Berlin put forward the proposal of converting Gleisdreieck into a large urban park that would integrate the different urban zones which converged there. The decades-long isolation of the site, which had formerly presented a problem, now represented an opportunity for joining the southern area of Potsdamer Platz with Kreuzberg and Schöneberg. The creation of the park would trigger one of the biggest urban expansions inside Berlin, all within a framework of multiple uses, and social characteristics. It was necessary to stimulate the development of sixteen new hectares of local amenities that would be capable of integrating different generations and social groups in a sustainable way, and in harmony with nature. Following intense discussion with local proprietors and residents, the need to reconcile these goals with the conservation of railway heritage also emerged.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">Once the area had been subjected to a process of undergrowth clearance and decontamination, it was then organized around a combination of existing and added elements. The project as a whole was planned around a large central meadow, intersected from east to west by a concrete footpath, and from north to south by a pair of railway lines. Once a month, a train slowly travels along these lines from its parking shed to German Museum of Technology. The concrete footpath, which is a continuation of one of the main Kreuzberg boulevards, starts in the east, bridges the four-metre difference in ground level by means of a stairway, and suddenly ends in the west on reaching the underground lines.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">North of the meadow, there is a large concrete slab with rounded edges. Being south-facing, this functions as a big sunny terrace, full of benches complete with footrests. In the south, the meadow overlooks Yorckstrasse, an underpass crossed by more than fifteen former railway bridges. To the east of the meadow there is quite a dense forest of pre-existing maples, oaks and birches, as well as newly planted trees of the same species. In this area, a couple of large metal frames each hold two swings. The edges of the park are finished with a collection of distinctive, functional spaces, for example a nursery, sports fields, concave surfaces for skateboards, stages for dancing, community gardens, or simply areas covered in gravel obtained from the site itself.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">Although initially the regeneration of Gleisdreieck Park was the subject of disagreement between those who were in favour of safeguarding the railway heritage, and those who wanted to regenerate the adjacent neighbourhoods, it was opened to the public in September 2011. The heart of Berlin now has a new green lung, in which the atmosphere of various small, very different corners fits neatly into a large-scale, wide-ranging and robust general order. This has been possible precisely because the intervention was not limited to conserving industrial remains in order to promote railway history. And as a reminder of the six decades of human absence, during which nature took over, the park has been able to conserve to some extent the spirit of the non-place that preceded it.</p>
                </div>
                <div id="passage-text-3" class="reading-passage" style="display: none;">
                    <h4 class="text-center">The fluoridation controversy</h4>
                    <p style="margin-bottom: 15px; text-align: justify;">The long-standing debate about whether to fluoridate our drinking water continues. Fluoridation is the addition of fluorine to public water supplies with the aim of reducing tooth decay. The fluorine, when mixed with water, becomes fluoride and the desired concentration of fluoride in public water is approximately one part per million, depending on the regional temperature and hence the amount of water people are likely to drink. Many studies, such as those by McClure in 1970 through to Burt in 1983, have shown that when children drink fluoridated water, their average rate of tooth decay seems greatly reduced. A typical figure claimed is 50 percent reduction. This apparently enormous benefit for children's teeth is the major argument in favor of fluoridation.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">Three main grounds for opposition to fluoridation have been expressed. First, opponents claim the benefits are exaggerated or not established. Second, there are claims of health risks to parts of the population, for example, allergic reactions. It is also accepted that high levels of fluoride can cause discoloration of otherwise healthy teeth. Proponents do not consider this to be a problem in such small concentrations, whereas opponents disagree - especially because some people drink more water and obtain much more than the standard milligram of fluoride per day. Third, fluoridation is thought to be an infringement on individual rights because it is compulsory medication of all members of a community.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">An understanding of the fluoridation issue has important implications. If, according to the experts, fluoridation is unquestionably a beneficial and non-hazardous measure, then the wisdom of allowing the public to vote on, and reject it must be questioned. Almost all studies that have been done have assumed that the scientific aspects of the controversy are unproblematic, and they have excluded science from sociological examination. The traditional view is that science is a special kind of knowledge, which is established through scientific methods and objectively applied by members of a scientific community. However, in recent years there has been a major challenge to this picture by a sociology of science that shows how scientific knowledge is socially negotiated, and inevitably linked to the values of the relevant parties, both scientists and nonscientists. These challengers do not see scientific knowledge as exempt from social inquiry.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">Kuhn (1970) argued that scientific knowledge does not always develop as an orderly process, but is characterized by periodic revolutions, in which the methods of study and the assessment criteria change in a fragmented way. According to Kuhn, the shift from one scientific way of thinking to another is not made solely on the basis of clear rules of formal scientific practice, but can include social factors, though Kuhn has never developed a full analysis of what these might be. Collins (1975) took this concept further when he asserted that the outcome of experiments was not something whose meaning could be immediately comprehended, but rather something for interpretation, discussion between scientists, and reinterpretation in the light of other experiments.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">One interpretation of this analysis of science is that traditional distinctions between facts and theories, and between scientific knowledge and values, can no longer be justified. Because social processes are involved at all stages of the creation, evaluation, and establishing of scientific knowledge, social values may also be involved.</p>
                    <p style="margin-bottom: 15px; text-align: justify;">In the same way as many scientists who study fluoridation have overlooked social values, sociologists have also downplayed an important part of the debate by ignoring the number of eminent scientists who have questioned aspects of fluoridation. An example is the study by Sutton in 1960, which analyzed the classic North American studies of the effect of fluoridation on tooth decay, and found that each showed significant methodological shortcomings. Sutton's detailed study throws doubt as to the extent of reductions in tooth decay from fluoridation. Yet Sutton's book is not cited in a single analysis of the fluoridation issue by any sociologist. In a situation of some scientific uncertainty, differences in values are highlighted. A supporter of fluoridation might argue, 'The evidence for the benefits of fluoridation is quite substantial, while the evidence for harm is limited and dubious. I think the likely benefits outweigh the possible dangers; hence I support fluoridation because it is the cheapest and easiest way to make sure every child reaps the benefits.' An opponent might argue, 'Though the evidence for the benefits of fluoridation is substantial, there is some doubt about it. Since fluoridation is not necessary for good teeth, we should forego the benefits if there is some slight chance of harm. Some scientists claim that a small percentage of the population could be harmed by fluoride. Therefore I oppose fluoridation of water supplies and favor the voluntary use of fluoride tablets by those who want to take them.'</p>
                    <p style="margin-bottom: 15px; text-align: justify;">Both arguments consider the scientific evidence concerning fluoridation, but differ in their assessments of the social benefits and costs. This difference is not between rationality and irrationality but is a legitimate difference in values, for example, the positive value placed on good teeth, the negative value placed on possible health risks, and the social benefits or costs of compulsory or voluntary intake of fluorides. From the sociological point of view, opposition to fluoridation is not necessarily irrational. Rather, claims to rationality and to scientific authority are better seen as part of a strategy to promote fluoridation than as incontrovertible statements of fact. Second, social values are likely to be bound up in any decision about fluoridation, so this is not an issue on which declarations by scientific experts ought to be considered the final word.</p>
                </div>
            </div>
            <div class="resizer" id="resizer">
                <div></div>
            </div>
            <div class="questions-panel" id="questions-panel">
                <div id="questions-1" class="question-set" style="display: block;">
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>1.</strong></span>
                            <span class="tf-question-text">Jason Neff discovered there had been a dramatic rise in dust levels in the second half of the nineteenth century.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q1" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q1" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q1" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>2.</strong></span>
                            <span class="tf-question-text">The Anasazi civilization disappeared due to the impact of dust in the atmosphere.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q2" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q2" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q2" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>3.</strong></span>
                            <span class="tf-question-text">Before cattle were introduced to the American Southwest, large numbers of bison occupied the area.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q3" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q3" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q3" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>4.</strong></span>
                            <span class="tf-question-text">The bison population in the Great Plains diminished because European settlers found it easy to hunt them.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q4" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q4" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q4" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>5.</strong></span>
                            <span class="tf-question-text">The development of railroads across the US was more expensive than originally expected.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q5" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q5" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q5" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>6.</strong></span>
                            <span class="tf-question-text">The Aztec Land and Cattle Company worked hard to take care of the grazing land it owned.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q6" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q6" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q6" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>7.</strong></span>
                            <span class="tf-question-text">Most of the land once owned by the Aztec Land and Cattle Company remains infertile today.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q7" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q7" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q7" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="summary-completion">
                        <p><strong>Complete the notes below.</strong></p>
                        <p><strong>Write NO MORE THAN TWO WORDS from the passage for each answer.</strong></p>
                        <p style="line-height: 2; margin-top: 15px;">
                            <strong>American Southwest: 1860s to present day</strong><br>
                            1862 – American Homestead Act was passed to encourage settlement in the West.<br>
                            1930s – Laws were passed to control the size of <input type="text" class="answer-input inline-input" id="q8">.<br>
                            <strong>Today Jayne Belnap believes:</strong><br>
                            ● soil was not affected by high <input type="text" class="answer-input inline-input" id="q9">.<br>
                            ● soil was seriously affected by cattle hooves.<br>
                            <strong>Jason Neff:</strong><br>
                            ● found that <input type="text" class="answer-input inline-input" id="q10"> in the Colorado region contained dust<br>
                            ● examined the dust for its chemical content as well as its <input type="text" class="answer-input inline-input" id="q11"><br>
                            ● concluded that the dust was from the American Southwest<br>
                            ● found that dust affects mountain environments by bringing in <input type="text" class="answer-input inline-input" id="q12"> that are not normally found there, causing faster seasonal snowmelt<br>
                            ● argues that dust is partly to blame for the gradual disappearance of some <input type="text" class="answer-input inline-input" id="q13"> and snow.
                        </p>
                    </div>
                </div>
                <div id="questions-2" class="question-set" style="display: none;">
                    <div class="matching-question-container">
                        <p><strong>Questions 14-19</strong></p>
                        <p>Reading Passage 2 has six paragraphs. Choose the correct heading for each paragraph from the list of headings below.</p>
                        <p>Choose the correct number, i–viii, in boxes 14–19.</p>
                        <p><strong>List of Headings</strong></p>
                        <p>i Objectives of the regeneration project<br>ii Architectural details of the station buildings<br>iii Features and facilities of the completed development<br>iv The remains of a railway system<br>v A positive evaluation of the finished project<br>vi A way of controlling development costs<br>vii Ways of crossing the site<br>viii Reasons why the area had become neglected</p>
                        <div class="matching-options-bank" id="bank-14-19">
                            <div class="drag-item" draggable="true" data-value="i">i</div>
                            <div class="drag-item" draggable="true" data-value="ii">ii</div>
                            <div class="drag-item" draggable="true" data-value="iii">iii</div>
                            <div class="drag-item" draggable="true" data-value="iv">iv</div>
                            <div class="drag-item" draggable="true" data-value="v">v</div>
                            <div class="drag-item" draggable="true" data-value="vi">vi</div>
                            <div class="drag-item" draggable="true" data-value="vii">vii</div>
                            <div class="drag-item" draggable="true" data-value="viii">viii</div>
                        </div>
                        <div class="matching-questions">
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>14.</strong> Paragraph A</span>
                                <div class="drop-zone" data-question="q14"></div>
                            </div>
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>15.</strong> Paragraph B</span>
                                <div class="drop-zone" data-question="q15"></div>
                            </div>
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>16.</strong> Paragraph C</span>
                                <div class="drop-zone" data-question="q16"></div>
                            </div>
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>17.</strong> Paragraph D</span>
                                <div class="drop-zone" data-question="q17"></div>
                            </div>
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>18.</strong> Paragraph E</span>
                                <div class="drop-zone" data-question="q18"></div>
                            </div>
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>19.</strong> Paragraph F</span>
                                <div class="drop-zone" data-question="q19"></div>
                            </div>
                        </div>
                    </div>
                    <div class="question">
                        <p><strong>Choose TWO letters, A-E.</strong></p>
                        <p><strong>20-21.</strong> Which TWO reasons are given for the choice of Gleisdreieck as a site for a park?</p>
                        <div style="margin-left: 20px;">
                            <label style="display: block; margin: 8px 0;">
                                <input type="checkbox" class="multi-select" data-group="q20-21" name="q20-21" value="A"> A. It was a habitat for some rare wildlife species
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="checkbox" class="multi-select" data-group="q20-21" name="q20-21" value="B"> B. It contained a particular tourist attraction
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="checkbox" class="multi-select" data-group="q20-21" name="q20-21" value="C"> C. It lay at the heart of the reunited city
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="checkbox" class="multi-select" data-group="q20-21" name="q20-21" value="D"> D. It was served by a major rail network
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="checkbox" class="multi-select" data-group="q20-21" name="q20-21" value="E"> E. It contained buildings which could be easily converted
                            </label>
                        </div>
                    </div>
                    <div class="question">
                        <p><strong>Choose TWO letters, A-E.</strong></p>
                        <p><strong>22-23.</strong> Which TWO things did the State of Berlin hope to achieve with the Gleisdreieck development?</p>
                        <div style="margin-left: 20px;">
                            <label style="display: block; margin: 8px 0;">
                                <input type="checkbox" class="multi-select" data-group="q22-23" name="q22-23" value="A"> A. to bring people of different ages together
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="checkbox" class="multi-select" data-group="q22-23" name="q22-23" value="B"> B. to encourage tourism
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="checkbox" class="multi-select" data-group="q22-23" name="q22-23" value="C"> C. to improve transport links
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="checkbox" class="multi-select" data-group="q22-23" name="q22-23" value="D"> D. to preserve industrial remains
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="checkbox" class="multi-select" data-group="q22-23" name="q22-23" value="E"> E. to generate income for the city
                            </label>
                        </div>
                    </div>
                    <div class="summary-completion">
                        <p><strong>Complete the summary below.</strong></p>
                        <p><strong>Write ONE WORD ONLY from the passage for each answer.</strong></p>
                        <p style="line-height: 2; margin-top: 15px;">
                            <strong>Gleisdreieck Urban Park</strong><br>
                            In the middle of the new park is a <input type="text" class="answer-input inline-input" id="q24">, where there is a path for pedestrians and two railway lines. A slow train uses these lines to make a regular journey between its <input type="text" class="answer-input inline-input" id="q25"> and a <input type="text" class="answer-input inline-input" id="q26">.
                        </p>
                    </div>
                </div>
                <div id="questions-3" class="question-set" style="display: none;">
                    <div class="question">
                        <p><strong>27.</strong> The optimum amount of fluorine in fluoridated water is calculated partly according to</p>
                        <div style="margin-left: 20px;">
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q27" value="A"> A. how hot the area is
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q27" value="B"> B. how warm the water is
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q27" value="C"> C. how many dental problems there are in the community
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q27" value="D"> D. how much fluorine the community chooses to have in its water
                            </label>
                        </div>
                    </div>
                    <div class="question">
                        <p><strong>28.</strong> One reason given by the writer for opposing fluoridation is that</p>
                        <div style="margin-left: 20px;">
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q28" value="A"> A. it may contribute to tooth decay
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q28" value="B"> B. it will be unacceptably expensive for the public
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q28" value="C"> C. obligatory fluoridation takes away personal freedom
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q28" value="D"> D. excessive fluoride could be added to the water by mistake
                            </label>
                        </div>
                    </div>
                    <div class="question">
                        <p><strong>29.</strong> The writer mentions Kuhn in order to</p>
                        <div style="margin-left: 20px;">
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q29" value="A"> A. provide a contrast with the view of Collins
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q29" value="B"> B. support the rational nature of scientific inquiry
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q29" value="C"> C. demonstrate that Kuhn did not argue his case adequately
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q29" value="D"> D. show that science can be influenced by non-scientific considerations
                            </label>
                        </div>
                    </div>
                    <div class="question">
                        <p><strong>30.</strong> What did Sutton's research discover about earlier studies in North America?</p>
                        <div style="margin-left: 20px;">
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q30" value="A"> A. There were failings in the way they were carried out
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q30" value="B"> B. The scientists involved had achieved unique results
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q30" value="C"> C. Proponents of fluoridation had not understood its long-term effects
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q30" value="D"> D. Fluoridation had a greater effect on tooth decay than previously believed
                            </label>
                        </div>
                    </div>
                    <div class="question">
                        <p><strong>31.</strong> In the last paragraph, what does the writer say about scientists?</p>
                        <div style="margin-left: 20px;">
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q31" value="A"> A. They should reveal their true motivations
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q31" value="B"> B. They should not decide the fluoridation policy
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q31" value="C"> C. They are solely concerned with scientific truths
                            </label>
                            <label style="display: block; margin: 8px 0;">
                                <input type="radio" name="q31" value="D"> D. They cannot reach agreement on the fluoridation issue
                            </label>
                        </div>
                    </div>
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>32.</strong></span>
                            <span class="tf-question-text">Scientific knowledge should be kept separate from social values.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q32" value="YES"> YES</label>
                            <label><input type="radio" name="q32" value="NO"> NO</label>
                            <label><input type="radio" name="q32" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>33.</strong></span>
                            <span class="tf-question-text">Many sociologists have disregarded the doubts that some scientists have concerning fluoridation.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q33" value="YES"> YES</label>
                            <label><input type="radio" name="q33" value="NO"> NO</label>
                            <label><input type="radio" name="q33" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>34.</strong></span>
                            <span class="tf-question-text">Sutton's findings have been given insufficient attention by scientists outside of North America.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q34" value="YES"> YES</label>
                            <label><input type="radio" name="q34" value="NO"> NO</label>
                            <label><input type="radio" name="q34" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="tf-question">
                        <div class="tf-question-line">
                            <span class="tf-question-number"><strong>35.</strong></span>
                            <span class="tf-question-text">There are valid arguments on both sides of the fluoridation debate.</span>
                        </div>
                        <div class="tf-options">
                            <label><input type="radio" name="q35" value="YES"> YES</label>
                            <label><input type="radio" name="q35" value="NO"> NO</label>
                            <label><input type="radio" name="q35" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="matching-question-container">
                        <p><strong>Questions 36-40</strong></p>
                        <p>Complete each sentence with the correct ending, A–G, below.</p>
                        <div class="matching-options-bank" id="bank-36-40">
                            <div class="drag-item" draggable="true" data-value="A">A</div>
                            <div class="drag-item" draggable="true" data-value="B">B</div>
                            <div class="drag-item" draggable="true" data-value="C">C</div>
                            <div class="drag-item" draggable="true" data-value="D">D</div>
                            <div class="drag-item" draggable="true" data-value="E">E</div>
                            <div class="drag-item" draggable="true" data-value="F">F</div>
                            <div class="drag-item" draggable="true" data-value="G">G</div>
                        </div>
                        <div class="matching-questions">
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>36.</strong> The traditional view of science is that</span>
                                <div class="drop-zone" data-question="q36"></div>
                            </div>
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>37.</strong> A sociological view of science argues that</span>
                                <div class="drop-zone" data-question="q37"></div>
                            </div>
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>38.</strong> Collins is of the opinion that</span>
                                <div class="drop-zone" data-question="q38"></div>
                            </div>
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>39.</strong> The writer suggests that a supporter of fluoridation may conclude that</span>
                                <div class="drop-zone" data-question="q39"></div>
                            </div>
                            <div class="matching-question-item">
                                <span style="flex: 1;"><strong>40.</strong> The writer suggests that an opponent of fluoridation may conclude that</span>
                                <div class="drop-zone" data-question="q40"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="bottom-nav">
        <div>
            <button class="part-btn active" data-part="1">Part 1 <span class="attempted-count">0 of 13</span></button>
            <button class="part-btn" data-part="2">Part 2 <span class="attempted-count">0 of 13</span></button>
            <button class="part-btn" data-part="3">Part 3 <span class="attempted-count">0 of 14</span></button>
        </div>
        <div id="question-nav">
            <button class="question-btn" data-question="1">1</button>
            <button class="question-btn" data-question="2">2</button>
            <button class="question-btn" data-question="3">3</button>
            <button class="question-btn" data-question="4">4</button>
            <button class="question-btn" data-question="5">5</button>
            <button class="question-btn" data-question="6">6</button>
            <button class="question-btn" data-question="7">7</button>
            <button class="question-btn" data-question="8">8</button>
            <button class="question-btn" data-question="9">9</button>
            <button class="question-btn" data-question="10">10</button>
            <button class="question-btn" data-question="11">11</button>
            <button class="question-btn" data-question="12">12</button>
            <button class="question-btn" data-question="13">13</button>
        </div>
        <div>
            <button id="submit-btn">Submit</button>
        </div>
    </div>

<script>
        // Timer System
        let timerSeconds = 3600;
        let timerInterval = null;
        let timerRunning = true;

        const timerDisplay = document.getElementById('timer');
        const timerToggle = document.getElementById('timer-toggle');
        const timerReset = document.getElementById('timer-reset');

        function updateTimerDisplay() {
            const minutes = Math.floor(timerSeconds / 60);
            const seconds = timerSeconds % 60;
            timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            if (timerInterval) return;
            timerRunning = true;
            timerToggle.textContent = '⏸';

            timerInterval = setInterval(() => {
                if (timerSeconds > 0) {
                    timerSeconds--;
                    updateTimerDisplay();
                } else {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    timerToggle.textContent = '▶';
                }
            }, 1000);
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            timerRunning = false;
            timerToggle.textContent = '▶';
        }

        timerToggle.addEventListener('click', () => {
            if (timerRunning) {
                pauseTimer();
            } else {
                startTimer();
            }
        });

        timerReset.addEventListener('click', () => {
            pauseTimer();
            timerSeconds = 3600;
            updateTimerDisplay();
        });

        startTimer();

        // Resizer
        const resizer = document.getElementById('resizer');
        const passagePanel = document.getElementById('passage-panel');
        const questionsPanel = document.getElementById('questions-panel');
        let isResizing = false;

        resizer.addEventListener('mousedown', (e) => {
            isResizing = true;
            document.body.style.cursor = 'col-resize';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;

            const containerWidth = passagePanel.parentElement.offsetWidth;
            const newPassageWidth = e.clientX - passagePanel.getBoundingClientRect().left;
            const newPassagePercent = (newPassageWidth / containerWidth) * 100;

            if (newPassagePercent > 20 && newPassagePercent < 80) {
                passagePanel.style.flex = `0 0 ${newPassagePercent}%`;
                questionsPanel.style.flex = `0 0 ${100 - newPassagePercent}%`;
            }
        });

        document.addEventListener('mouseup', () => {
            isResizing = false;
            document.body.style.cursor = 'default';
        });

        // Drag and Drop System
        let draggedElement = null;

        document.addEventListener('dragstart', (e) => {
            if (e.target.classList.contains('drag-item')) {
                draggedElement = e.target;
                e.target.classList.add('dragging');
            }
        });

        document.addEventListener('dragend', (e) => {
            if (e.target.classList.contains('drag-item')) {
                e.target.classList.remove('dragging');
            }
        });

        document.addEventListener('dragover', (e) => {
            if (e.target.classList.contains('drop-zone')) {
                e.preventDefault();
                e.target.classList.add('drag-over');
            }
        });

        document.addEventListener('dragleave', (e) => {
            if (e.target.classList.contains('drop-zone')) {
                e.target.classList.remove('drag-over');
            }
        });

        document.addEventListener('drop', (e) => {
            if (e.target.classList.contains('drop-zone') && draggedElement) {
                e.preventDefault();
                e.target.classList.remove('drag-over');
                
                const value = draggedElement.dataset.value;
                const questionId = e.target.dataset.question;
                
                // Set the answer
                e.target.dataset.answer = value;
                e.target.textContent = value;
                e.target.classList.add('filled');
                
                updateAnsweredIndicators();
            }
        });

        // Allow clicking drop zone to clear it
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('drop-zone') && e.target.classList.contains('filled')) {
                e.target.dataset.answer = '';
                e.target.textContent = '';
                e.target.classList.remove('filled');
                updateAnsweredIndicators();
            }
        });

        // Navigation System
        let currentPart = 1;
        let currentQuestion = 1;

        document.querySelectorAll('.part-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const partNum = parseInt(btn.dataset.part);
                switchToPart(partNum);
            });
        });

        function switchToPart(partNum) {
            currentPart = partNum;

            document.querySelectorAll('.reading-passage').forEach(passage => {
                passage.style.display = 'none';
            });
            document.querySelectorAll('.question-set').forEach(set => {
                set.style.display = 'none';
            });
            document.querySelectorAll('.part-header').forEach(header => {
                header.style.display = 'none';
            });

            document.getElementById(`passage-text-${partNum}`).style.display = 'block';
            document.getElementById(`questions-${partNum}`).style.display = 'block';
            document.getElementById(`part-header-${partNum}`).style.display = 'block';

            document.querySelectorAll('.part-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.part-btn[data-part="${partNum}"]`).classList.add('active');

            updateSubNavigation(partNum);
        }

        function updateSubNavigation(partNum) {
            const questionNav = document.getElementById('question-nav');
            questionNav.innerHTML = '';

            const questionRanges = {
                1: { start: 1, end: 13 },
                2: { start: 14, end: 26 },
                3: { start: 27, end: 40 }
            };

            const { start, end } = questionRanges[partNum];

            for (let i = start; i <= end; i++) {
                const btn = document.createElement('button');
                btn.classList.add('question-btn');
                btn.dataset.question = i;
                btn.textContent = i;

                if (isQuestionAnswered(i)) {
                    btn.classList.add('answered');
                }

                btn.addEventListener('click', () => goToQuestion(i));
                questionNav.appendChild(btn);
            }
        }

        function goToQuestion(qNum) {
            currentQuestion = qNum;
            const input = document.getElementById(`q${qNum}`);
            if (input) {
                input.scrollIntoView({ behavior: 'smooth', block: 'center' });
                if (input.tagName === 'INPUT') {
                    input.focus();
                }
                input.classList.add('flash');
                setTimeout(() => input.classList.remove('flash'), 500);
            } else {
                // For checkbox or drop-zone questions
                const dropZone = document.querySelector(`.drop-zone[data-question="q${qNum}"]`);
                if (dropZone) {
                    dropZone.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        }

        function isQuestionAnswered(qNum) {
            // Check for multi-select checkboxes (20-21, 22-23)
            if ((qNum >= 20 && qNum <= 21) || (qNum >= 22 && qNum <= 23)) {
                const group = qNum >= 20 && qNum <= 21 ? 'q20-21' : 'q22-23';
                const checkboxes = document.querySelectorAll(`input[data-group="${group}"]:checked`);
                return checkboxes.length > 0;
            }

            // Check text input
            const textInput = document.getElementById(`q${qNum}`);
            if (textInput && textInput.type === 'text') {
                return textInput.value.trim() !== '';
            }

            // Check radio button
            const radioInput = document.querySelector(`input[name="q${qNum}"]:checked`);
            if (radioInput) {
                return true;
            }

            // Check drop-zone
            const dropZone = document.querySelector(`.drop-zone[data-question="q${qNum}"]`);
            if (dropZone && dropZone.dataset.answer) {
                return true;
            }

            return false;
        }

        function updateAnsweredIndicators() {
            document.querySelectorAll('.question-btn').forEach(btn => {
                const qNum = parseInt(btn.dataset.question);
                if (isQuestionAnswered(qNum)) {
                    btn.classList.add('answered');
                } else {
                    btn.classList.remove('answered');
                }
            });

            const questionCounts = { 1: 13, 2: 13, 3: 14 };
            for (let part = 1; part <= 3; part++) {
                const start = part === 1 ? 1 : part === 2 ? 14 : 27;
                const end = start + questionCounts[part] - 1;
                let answered = 0;

                for (let q = start; q <= end; q++) {
                    if (isQuestionAnswered(q)) answered++;
                }

                const countSpan = document.querySelector(`.part-btn[data-part="${part}"] .attempted-count`);
                if (countSpan) {
                    countSpan.textContent = `${answered} of ${questionCounts[part]}`;
                }
            }
        }

        document.querySelectorAll('.answer-input').forEach(input => {
            input.addEventListener('input', updateAnsweredIndicators);
            input.addEventListener('change', updateAnsweredIndicators);
        });

        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', updateAnsweredIndicators);
        });

        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', updateAnsweredIndicators);
        });

        document.addEventListener('keydown', (e) => {
            if (e.key >= '1' && e.key <= '9') {
                const qNum = parseInt(e.key);
                const ranges = { 1: [1, 13], 2: [14, 26], 3: [27, 40] };
                const [start, end] = ranges[currentPart];
                if (qNum + start - 1 <= end) {
                    goToQuestion(start + qNum - 1);
                }
            }
        });

        // Text Highlighting
        let highlights = [];

        document.addEventListener('contextmenu', (e) => {
            const selection = window.getSelection();
            if (selection.toString().trim().length === 0) return;

            e.preventDefault();

            const menu = document.createElement('div');
            menu.id = 'context-menu';
            menu.style.cssText = `
                position: absolute;
                top: ${e.pageY}px;
                left: ${e.pageX}px;
                background: white;
                border: 1px solid #ddd;
                border-radius: 4px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                padding: 5px 0;
                z-index: 10000;
            `;

            const highlightBtn = document.createElement('button');
            highlightBtn.textContent = '🖍 Highlight';
            highlightBtn.style.cssText = 'display: block; width: 100%; padding: 8px 15px; border: none; background: white; text-align: left; cursor: pointer;';
            highlightBtn.addEventListener('click', () => {
                highlightSelection();
                menu.remove();
            });

            menu.appendChild(highlightBtn);
            document.body.appendChild(menu);

            setTimeout(() => {
                document.addEventListener('click', () => menu.remove(), { once: true });
            }, 100);
        });

        function highlightSelection() {
            const selection = window.getSelection();
            if (selection.rangeCount === 0) return;

            const range = selection.getRangeAt(0);
            const span = document.createElement('span');
            span.classList.add('highlighted-text');
            span.style.backgroundColor = 'yellow';

            range.surroundContents(span);
            highlights.push(span);

            selection.removeAllRanges();
        }

        function clearAllHighlights() {
            highlights.forEach(span => {
                const parent = span.parentNode;
                while (span.firstChild) {
                    parent.insertBefore(span.firstChild, span);
                }
                parent.removeChild(span);
            });
            highlights = [];
        }

        // Submit & Results
        const correctAnswers = {
            q1: 'TRUE', q2: 'FALSE', q3: 'FALSE', q4: 'NOT GIVEN', q5: 'NOT GIVEN',
            q6: 'FALSE', q7: 'TRUE', q8: 'cattle herds', q9: 'winds', q10: 'lake sediments',
            q11: 'size', q12: 'nutrients', q13: 'glaciers',
            q14: 'iv', q15: 'viii', q16: 'i', q17: 'vii', q18: 'iii', q19: 'v',
            'q20-21': ['B', 'C'], 'q22-23': ['A', 'D'], 
            q24: 'meadow', q25: 'shed', q26: 'museum',
            q27: 'A', q28: 'C', q29: 'D', q30: 'A', q31: 'B',
            q32: 'NO', q33: 'YES', q34: 'NOT GIVEN', q35: 'YES',
            q36: 'G', q37: 'A', q38: 'A', q39: 'D', q40: 'C'
        };

        document.getElementById('submit-btn').addEventListener('click', () => {
            if (!confirm('Are you sure you want to submit?')) return;

            let correct = 0;
            let incorrect = 0;
            const results = [];

            for (let qNum = 1; qNum <= 40; qNum++) {
                const qId = `q${qNum}`;
                let userAnswer = '';
                let inputElement = null;
                let isCorrect = false;

                // Handle multi-select questions (20-21, 22-23)
                if ((qNum >= 20 && qNum <= 21) || (qNum >= 22 && qNum <= 23)) {
                    if (qNum === 20 || qNum === 22) {
                        const group = qNum === 20 ? 'q20-21' : 'q22-23';
                        const checkboxes = document.querySelectorAll(`input[data-group="${group}"]:checked`);
                        const selected = Array.from(checkboxes).map(cb => cb.value).sort();
                        userAnswer = selected.join(', ');
                        
                        const correctAnswer = correctAnswers[group].slice().sort();
                        isCorrect = selected.length === correctAnswer.length && 
                                   selected.every((val, idx) => val === correctAnswer[idx]);
                        
                        results.push({
                            question: `${qNum}-${qNum+1}`,
                            userAnswer: userAnswer || '(blank)',
                            correctAnswer: correctAnswer.join(', '),
                            isCorrect
                        });
                        
                        if (isCorrect) {
                            correct += 2;
                        } else {
                            incorrect += 2;
                        }
                        
                        // Mark the checkboxes
                        checkboxes.forEach(cb => {
                            const label = cb.parentElement;
                            if (isCorrect) {
                                label.style.color = '#28a745';
                                label.style.fontWeight = 'bold';
                            } else {
                                label.style.color = '#dc3545';
                                label.style.fontWeight = 'bold';
                            }
                        });
                        
                        continue; // Skip q21 and q23 since we handle them together
                    } else {
                        continue; // Skip q21 and q23
                    }
                }

                // Text input
                const textInput = document.getElementById(qId);
                if (textInput && textInput.type === 'text') {
                    userAnswer = textInput.value.trim();
                    inputElement = textInput;
                }

                // Radio button
                const radioInput = document.querySelector(`input[name="${qId}"]:checked`);
                if (radioInput) {
                    userAnswer = radioInput.value;
                    inputElement = radioInput.parentElement;
                }

                // Drop-zone
                const dropZone = document.querySelector(`.drop-zone[data-question="${qId}"]`);
                if (dropZone) {
                    userAnswer = dropZone.dataset.answer || '';
                    inputElement = dropZone;
                }

                const correctAnswer = correctAnswers[qId] || '';
                
                // Normalize answers for comparison
                const normalizedUser = userAnswer.toLowerCase().trim();
                const normalizedCorrect = correctAnswer.toLowerCase().trim();
                
                isCorrect = normalizedUser === normalizedCorrect;

                if (inputElement) {
                    inputElement.classList.remove('correct', 'incorrect');
                    if (isCorrect) {
                        correct++;
                        inputElement.classList.add('correct');
                        if (inputElement.style) {
                            inputElement.style.borderColor = '#28a745';
                            inputElement.style.backgroundColor = '#d4edda';
                        }
                    } else {
                        incorrect++;
                        inputElement.classList.add('incorrect');
                        if (inputElement.style) {
                            inputElement.style.borderColor = '#dc3545';
                            inputElement.style.backgroundColor = '#f8d7da';
                        }
                    }
                } else {
                    incorrect++;
                }

                results.push({
                    question: qNum,
                    userAnswer: userAnswer || '(blank)',
                    correctAnswer,
                    isCorrect
                });
            }

            showResultsModal(correct, incorrect, results);
        });

        function showResultsModal(correct, incorrect, results) {
            const total = correct + incorrect;
            const percentage = ((correct / total) * 100).toFixed(1);

            let tableRows = '';
            results.forEach((r) => {
                const statusIcon = r.isCorrect ? '✓' : '✗';
                const statusColor = r.isCorrect ? '#28a745' : '#dc3545';
                tableRows += `
                    <tr>
                        <td style="padding: 8px; border: 1px solid #ddd;">${r.question}</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">${r.userAnswer}</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">${r.correctAnswer}</td>
                        <td style="padding: 8px; border: 1px solid #ddd; color: ${statusColor};">${statusIcon}</td>
                    </tr>
                `;
            });

            const modalHTML = `
                <div id="results-modal" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 10000; display: flex; align-items: center; justify-content: center;">
                    <div style="background: white; padding: 30px; border-radius: 8px; max-width: 800px; max-height: 80vh; overflow-y: auto;">
                        <h2 style="margin-bottom: 20px;">Test Results</h2>
                        <p style="font-size: 18px; margin-bottom: 10px;">
                            <strong>Score: ${correct}/${total} (${percentage}%)</strong>
                        </p>
                        <p style="margin-bottom: 20px;">
                            Correct: <span style="color: #28a745;">${correct}</span> |
                            Incorrect: <span style="color: #dc3545;">${incorrect}</span>
                        </p>
                        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
                            <thead>
                                <tr style="background: #f5f5f5;">
                                    <th style="padding: 10px; border: 1px solid #ddd;">Q</th>
                                    <th style="padding: 10px; border: 1px solid #ddd;">Your Answer</th>
                                    <th style="padding: 10px; border: 1px solid #ddd;">Correct Answer</th>
                                    <th style="padding: 10px; border: 1px solid #ddd;">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${tableRows}
                            </tbody>
                        </table>
                        <button onclick="document.getElementById('results-modal').remove()" style="background: #4a90e2; color: white; padding: 10px 30px; border: none; border-radius: 4px; cursor: pointer;">Close</button>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }
    </script>
</body>
</html>
