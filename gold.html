<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Reading Passage 2 ‚Äì Gold dusters</title>
<style>
  :root{--brand:#2563eb;--ink:#111827;--bg:#f7f7fb;--ok:#16a34a;--bad:#dc2626;--muted:#6b7280}
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:#111}
  .container{display:flex;gap:20px;max-width:1200px;margin:0 auto;padding:20px 20px 96px}
  .card{background:#fff;border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,.08);padding:20px;overflow:auto;max-height:90vh}
  .passage{flex:1}
  .questions{flex:1}
  h1{color:var(--ink);border-bottom:2px solid var(--brand);padding-bottom:10px;margin:0 0 14px}
  h2{color:var(--brand);margin:22px 0 10px}
  h3{margin:8px 0 0}
  .muted{color:var(--muted)}

  /* Timer */
  .timerWrap{position:fixed;top:16px;right:16px;display:flex;align-items:center;gap:8px;z-index:10}
  .timer{background:var(--brand);color:#fff;padding:10px 14px;border-radius:8px;font-weight:700}
  .tbtn{border:1px solid #e5e7eb;background:#fff;color:#111;padding:8px 10px;border-radius:8px;cursor:pointer}

  /* Questions */
  .qsection{margin:14px 0 6px}
  .qblock{padding:14px;border:1px solid #e5e7eb;border-radius:12px;margin:12px 0}
  .qhead{font-weight:600;margin-bottom:8px}
  .options{margin-top:8px}
  .options label{display:block;margin:6px 0}
  select,input[type="text"]{padding:8px;border-radius:8px;border:1px solid #e5e7eb;width:100%;max-width:520px}
  .submit{background:var(--brand);color:#fff;border:0;padding:12px 18px;border-radius:8px;cursor:pointer;font-size:16px;margin-top:16px}
  .submit:hover{filter:brightness(.95)}

  /* Results */
  .results{display:none;margin-top:18px;background:#f8f9fa;border-radius:10px;padding:16px}
  .results ul{list-style:none;padding:0;margin:8px 0 0}
  .results li{margin:6px 0;padding:8px;border-radius:8px}
  .results li.ok{background:#ecfdf5;color:#065f46}
  .results li.bad{background:#fef2f2;color:#991b1b}
  .results .meta{font-size:13px;color:var(--muted)}

  /* Footer chips */
  .footerNav{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e5e7eb;padding:10px 12px;display:flex;flex-wrap:wrap;gap:8px;align-items:center;z-index:9}
  .chip{border:1px solid #d1d5db;background:#fff;color:#111;padding:6px 10px;border-radius:999px;cursor:pointer;font-size:14px}
  .chip.answered{border-color:#9ca3af;background:#f3f4f6}

  /* Highlights */
  .palette{position:fixed;background:#fff;padding:8px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,.12);display:none;z-index:9}
  .hbtn{background:var(--brand);color:#fff;border:0;padding:6px 10px;border-radius:6px;margin:4px 4px 0 0;cursor:pointer}
  .highlight{background:yellow}

  .tg{position:fixed;bottom:96px;right:16px;background:#0088cc;color:#fff;border:0;padding:12px 16px;border-radius:9999px;display:flex;align-items:center;gap:8px;cursor:pointer;box-shadow:0 8px 20px rgba(0,136,204,.35)}
</style>
</head>
<body>
  <div class="timerWrap">
    <div class="timer" id="timer">20:00</div>
    <button class="tbtn" id="pauseBtn">‚è∏Ô∏è Pause</button>
    <button class="tbtn" id="resumeBtn" disabled>‚ñ∂Ô∏è Resume</button>
  </div>

  <!-- Highlight palettes -->
  <div class="palette" id="pPalette">
    <button class="hbtn" data-color="yellow">Yellow</button>
    <button class="hbtn" data-color="lightgreen">Green</button>
    <button class="hbtn" data-color="lightblue">Blue</button>
    <button class="hbtn" data-color="pink">Pink</button>
    <button class="hbtn" data-color="orange">Orange</button>
    <button class="hbtn" id="clearPMarks">Clear</button>
  </div>
  <div class="palette" id="qPalette">
    <button class="hbtn" data-color="yellow">Yellow</button>
    <button class="hbtn" data-color="lightgreen">Green</button>
    <button class="hbtn" data-color="lightblue">Blue</button>
    <button class="hbtn" data-color="pink">Pink</button>
    <button class="hbtn" data-color="orange">Orange</button>
    <button class="hbtn" id="clearQMarks">Clear</button>
  </div>

  <div class="container">
    <div class="card passage" id="passageCard">
      <h1 id="title"></h1>
      <div id="subtitle" class="muted"></div>

      <div id="passage">
        <h2>Reading Passage 2</h2>
        <h3>Gold dusters</h3>
        <p class="muted">They are the Earth‚Äôs pollinators and they come in more than 200,000 shapes and sizes.</p>

        <p><strong>Section A</strong> ‚Äî Row upon row, tomato plants stand in formation inside a greenhouse. To reproduce, most flowering plants depend on a third party to transfer pollen between their male and female parts. Some require extra encouragement to give up that golden dust. The tomato flower, for example, needs a violent shake ‚Äî a vibration roughly equivalent to 30 times the pull of Earth‚Äôs gravity, explains Arizona entomologist Stephen Buchmann. Growers have tried numerous ways to rattle pollen from tomato blossoms: shaking tables, air blowers and blasts of sound. But natural means seem to work better.</p>

        <p><strong>Section B</strong> ‚Äî It‚Äôs no surprise that nature‚Äôs design works best. What‚Äôs astonishing is the array of workers that do it: more than 200,000 animal species, by varying strategies, help the world‚Äôs 240,000 species of flowering plants make more flowers. <em>Flies and beetles</em> are the original pollinators, going back to when flowering plants first appeared 130 million years ago. As for bees, scientists have identified some 20,000 distinct species so far. Hummingbirds, butterflies, moths, wasps and ants are also up to the job. Even non-flying mammals do their part: sugar-loving opossums, some rainforest monkeys and lemurs in Madagascar ‚Äî all with nimble hands that tear open flower stalks and <em>furry coats</em> to which pollen sticks. Most surprising, some lizards, such as geckos, lap up nectar and pollen and then transport the stuff on their faces and feet as they forage onward.</p>

        <p><strong>Section C</strong> ‚Äî All that messy diversity, unfortunately, is not well suited to the monocrops and mega-yields of modern commercial farms. Before farms got so big, says conservation biologist Claire Kremen of the University of California, Berkeley, ‚Äúwe didn‚Äôt have to manage pollinators. They were all around because of the diverse landscapes. Now you need to bring in an army to get pollination done.‚Äù The European honeybee was first imported to the US some 400 years ago. Now at least a hundred commercial crops rely almost entirely on managed honeybees, which beekeepers raise and rent out to big farms. And although other bee species are five to ten times more efficient, on a per-bee basis, at pollinating certain fruits, honeybees have bigger colonies, cover <em>longer distances</em> and tolerate management and movement better than most insects. They‚Äôre not picky ‚Äî they‚Äôll spend time on almost any crop. It‚Äôs tricky to calculate what their work is truly worth; some economists put it at more than $200 billion globally a year.</p>

        <p><strong>Section D</strong> ‚Äî Industrial-scale farming, however, may be wearing down the system. Honeybees have suffered diseases and parasite infestations for as long as they‚Äôve been managed, but in 2006 came an extreme blow. Around the world, bees began to disappear over the winter in massive numbers. Beekeepers would lift the lid of a hive and find only the queen and a few stragglers ‚Äî the <em>worker bees</em> gone. In the US, a third to half of all hives crashed; some beekeepers reported losses near 90 percent. The mysterious culprit was named colony collapse disorder (CCD) and it remains an annual menace ‚Äî and an enigma.</p>

        <p><strong>Section E</strong> ‚Äî When it first hit, many people assumed that our slathering of chemicals on fields was to blame. Indeed, says Jeff Pettis of the USDA Bee Research Laboratory, ‚Äúwe do find more disease in bees that have been exposed to pesticides, even at low levels.‚Äù But it is likely that CCD involves multiple stressors. Poor nutrition and chemical exposure might wear down a bee‚Äôs immunities before a virus finishes the insect off. New studies reveal that fungicides ‚Äî not previously thought toxic to bees ‚Äî can interfere with microbes that break down pollen in the insects‚Äô guts, affecting nutrient absorption and thus long-term health and longevity. Some findings point to viral and fungal pathogens working together. ‚ÄúI only wish we had a single agent causing all the declines,‚Äù Pettis says. ‚ÄúThat would make our work much easier.‚Äù</p>

        <p><strong>Section F</strong> ‚Äî However, habitat loss and alteration are even more of a menace to pollinators than pathogens. Kremen encourages farmers to cultivate the flora surrounding farmland to help solve habitat problems. ‚ÄúYou can‚Äôt move the farm,‚Äù she says, ‚Äúbut you can diversify what grows in its vicinity ‚Äî along roads, even in tractor yards.‚Äù Planting hedgerows and patches of native flowers that bloom at different times and seeding fields with multiple plant species rather than monocrops ‚Äúnot only is better for native pollinators, but is just better agriculture,‚Äù she says. Pesticide-free wildflower havens, adds Buchmann, would also bolster populations of useful insects. Fortunately, too, ‚Äúthere are far more generalist plants than specialist plants, so there‚Äôs a lot of redundancy in pollination,‚Äù Buchmann says. ‚ÄúEven if one pollinator drops out, there are often pretty good surrogates left to do the job.‚Äù The key to keeping our gardens growing strong, he says, is letting that diversity thrive.</p>

        <p><strong>Section G</strong> ‚Äî Take away that variety, and we‚Äôll lose more than honey. ‚ÄúWe wouldn‚Äôt starve,‚Äù says Kremen. ‚ÄúBut what we eat ‚Äî and even what we wear, since pollinators also give us some of our cotton and flax ‚Äî would be limited to crops whose pollen travels by other means.‚Äù ‚ÄúIn a sense,‚Äù she says, ‚Äúour lives would be dictated by the wind.‚Äù It‚Äôs vital that we give pollinators more of what they need and less of what they don‚Äôt, and ease the burden on managed bees by letting native animals do their part, say scientists.</p>
      </div>
    </div>

    <div class="card questions">
      <h1>Questions</h1>
      <div id="qroot"></div>
      <button class="submit" id="submitBtn">Submit Answers</button>
      <div class="results" id="results">
        <h2>Your Results</h2>
        <div id="score" class="meta"></div>
        <ul id="answers"></ul>
      </div>
    </div>
  </div>

  <div class="footerNav" id="footerNav"></div>
  <button class="tg" id="tgBtn">üì¢ Join my Telegram</button>

<script>
/* =======================
   CONFIG
   ======================= */
const CONFIG = {
  title: "READING PASSAGE 2 ‚Äì Gold dusters",
  subtitle: "You should spend about 20 minutes on Questions 14‚Äì26.",
  durationMinutes: 20,
  telegramLink: "https://t.me/yourchannel",
  showFooterNavigator: true,

  sections: [
    /* 14‚Äì20 Headings */
    {
      type: "headings",
      heading: "Questions 14‚Äì20",
      instructions: [
        "The passage has seven sections, A‚ÄìG.",
        "Choose the correct heading for each section from the list of headings below."
      ],
      headingsList: [
        { key:"i",  text:"Looking for clues" },
        { key:"ii", text:"Blaming the beekeepers" },
        { key:"iii",text:"Solutions to a more troublesome issue" },
        { key:"iv", text:"Discovering a new bee species" },
        { key:"v",  text:"An impossible task for any human" },
        { key:"vi", text:"The preferred pollinator" },
        { key:"vii",text:"Plant features designed to suit the pollinator" },
        { key:"viii",text:"Some obvious and less obvious pollen carriers" },
        { key:"ix", text:"The undesirable alternative" },
        { key:"x",  text:"An unexpected setback" }
      ],
      items: [
        { id: 14, prompt: "Section A", correct: "v" },
        { id: 15, prompt: "Section B", correct: "viii" },
        { id: 16, prompt: "Section C", correct: "vi" },
        { id: 17, prompt: "Section D", correct: "x" },
        { id: 18, prompt: "Section E", correct: "i" },
        { id: 19, prompt: "Section F", correct: "iii" },
        { id: 20, prompt: "Section G", correct: "ix" }
      ]
    },

    /* 21‚Äì24 Sentence completion */
    {
      type: "gap",
      heading: "Questions 21‚Äì24",
      instructions: ["Complete the sentences below. NO MORE THAN THREE WORDS."],
      items: [
        { id: 21, prompt: "Both ______ were the first creatures to pollinate the world‚Äôs plants.", correct: "flies and beetles" },
        { id: 22, prompt: "Monkeys transport pollen on their ______.", correct: "furry coats" },
        { id: 23, prompt: "Honeybees are favoured pollinators partly because they travel ______.", correct: "longer distances" },
        { id: 24, prompt: "A feature of CCD is often the loss of all the ______.", correct: "worker bees" }
      ]
    },

    /* 25‚Äì26 Choose TWO letters */
    {
      type: "msq",
      heading: "Questions 25‚Äì26",
      instructions: [
        "Choose TWO letters, A‚ÄìE.",
        "Which TWO methods of combating the problems caused by CCD and habitat loss are mentioned?"
      ],
      options: [
        { key:"A", text:"using more imported pest controllers" },
        { key:"B", text:"removing microbes from bees‚Äô stomachs" },
        { key:"C", text:"cultivating a wide range of flowering plants" },
        { key:"D", text:"increasing the size of many farms" },
        { key:"E", text:"placing less reliance on honeybees" }
      ],
      correct: ["C","E"]
    }
  ]
};

/* =======================
   RENDER
   ======================= */
document.getElementById('title').textContent = CONFIG.title;
document.getElementById('subtitle').textContent = CONFIG.subtitle || '';

const qroot = document.getElementById('qroot');
const navIds = [];
const answersMap = {};

function sectionHeader(t){ const h=document.createElement('h2'); h.className='qsection'; h.textContent=t; return h; }

/* Headings renderer */
function renderHeadings(sec){
  qroot.appendChild(sectionHeader(sec.heading));
  (sec.instructions||[]).forEach(tx=>{ const p=document.createElement('p'); p.className='muted'; p.textContent=tx; qroot.appendChild(p); });

  const bank=document.createElement('div'); bank.className='qblock';
  bank.innerHTML = `<div class="qhead"><strong>List of Headings</strong></div>
    <div class="options">${sec.headingsList.map(h=>`<div><b>${h.key}</b> ‚Äî ${h.text}</div>`).join('')}</div>`;
  qroot.appendChild(bank);

  sec.items.forEach(it=>{
    const b=document.createElement('div'); b.className='qblock'; b.id=`anchor-${it.id}`;
    const letters = sec.headingsList.map(h=>h.key);
    const opts = letters.map(k=>`<label><input type="radio" name="q${it.id}" value="${k}"> ${k}</label>`).join('');
    b.innerHTML = `<div class="qhead"><strong>${it.id}.</strong> ${it.prompt}</div><div class="options">${opts}</div>`;
    qroot.appendChild(b); navIds.push(it.id); answersMap[it.id]=it.correct||'';
  });
}

/* Gap-fill renderer */
function renderGap(sec){
  qroot.appendChild(sectionHeader(sec.heading));
  (sec.instructions||[]).forEach(tx=>{ const p=document.createElement('p'); p.className='muted'; p.textContent=tx; qroot.appendChild(p); });
  sec.items.forEach(it=>{
    const b=document.createElement('div'); b.className='qblock'; b.id=`anchor-${it.id}`;
    b.innerHTML = `<div class="qhead"><strong>${it.id}.</strong> ${it.prompt}</div>
                   <div class="options"><input type="text" id="q${it.id}" placeholder="your answer"></div>`;
    qroot.appendChild(b); navIds.push(it.id); answersMap[it.id]=it.correct||'';
  });
}

/* Multi-select (TWO letters) */
function renderMSQ(sec){
  qroot.appendChild(sectionHeader(sec.heading));
  (sec.instructions||[]).forEach(tx=>{ const p=document.createElement('p'); p.className='muted'; p.textContent=tx; qroot.appendChild(p); });
  const b=document.createElement('div'); b.className='qblock'; b.id='anchor-25_26';
  const opts = sec.options.map(x=>`<label><input type="checkbox" name="q25_26" value="${x.key}"> ${x.key} ${x.text}</label>`).join('');
  b.innerHTML = `<div class="qhead"><strong>25‚Äì26.</strong> Select TWO.</div><div class="options">${opts}</div>`;
  qroot.appendChild(b); navIds.push(25,26); answersMap['25_26'] = sec.correct.slice();
}

/* Build UI */
CONFIG.sections.forEach(sec=>{
  if (sec.type==='headings') renderHeadings(sec);
  if (sec.type==='gap') renderGap(sec);
  if (sec.type==='msq') renderMSQ(sec);
});

/* Footer chips */
const footerNav=document.getElementById('footerNav');
(function(){
  if(!CONFIG.showFooterNavigator){ footerNav.style.display='none'; return; }
  footerNav.innerHTML='<strong class="muted">Questions:</strong>';
  [...new Set(navIds)].sort((a,b)=>a-b).forEach(id=>{
    const chip=document.createElement('button'); chip.className='chip'; chip.id=`chip-${id}`; chip.textContent=id;
    chip.addEventListener('click',()=>{ document.getElementById(`anchor-${id}`)?.scrollIntoView({behavior:'smooth',block:'center'}); });
    footerNav.appendChild(chip);
  });
})();
function markChipAnswered(id, answered){
  const chip=document.getElementById(`chip-${id}`); if(chip) chip.classList.toggle('answered', !!answered);
}
document.addEventListener('change',(e)=>{
  const m=String(e.target.name||e.target.id||'').match(/q(\d+)/) || (e.target.name==='q25_26' ? ['','25'] : null);
  const id=m? +m[1] : null; if(!id) return;
  const answered = (e.target.type==='radio') ? (!!document.querySelector(`input[name='q${id}']:checked`))
                 : (e.target.type==='checkbox') ? (document.querySelectorAll(`input[name='q25_26']:checked`).length>0)
                 : (e.target.value.trim().length>0);
  markChipAnswered(id, answered); if(id===25) markChipAnswered(26, answered);
});

/* Timer */
let timeLeft=Math.max(1,+CONFIG.durationMinutes||20)*60;
const timer=document.getElementById('timer');
const pauseBtn=document.getElementById('pauseBtn');
const resumeBtn=document.getElementById('resumeBtn');
let paused=false, iv;
const fmt=s=>`${String(Math.floor(s/60)).padStart(2,'0')}:${String(s%60).padStart(2,'0')}`;
function startTick(){
  if(iv) clearInterval(iv);
  iv=setInterval(()=>{ if(paused) return; timer.textContent=fmt(timeLeft);
    if(timeLeft<=0){ clearInterval(iv); alert("Time's up! Submitting."); submit(); } timeLeft--; },1000);
}
timer.textContent=fmt(timeLeft); startTick();
pauseBtn.addEventListener('click',()=>{ paused=true; pauseBtn.disabled=true; resumeBtn.disabled=false; });
resumeBtn.addEventListener('click',()=>{ paused=false; pauseBtn.disabled=false; resumeBtn.disabled=true; });

/* Submit & grading */
document.getElementById('submitBtn').addEventListener('click', submit);
function submit(){
  paused=true; pauseBtn.disabled=true; resumeBtn.disabled=false;
  let total=0, graded=0, correctCount=0;
  const itemsOut=[];
  const ids=Object.keys(answersMap);

  ids.forEach(key=>{
    const ans=answersMap[key];
    const label=(key==='25_26') ? '25‚Äì26' : key;
    let user='';
    if(key==='25_26'){
      user = Array.from(document.querySelectorAll(`input[name='q25_26']:checked`)).map(x=>x.value).sort().join(', ');
    } else {
      const picked=document.querySelector(`input[name="q${key}"]:checked`);
      user = picked? picked.value : (document.getElementById('q'+key)?.value || '');
    }
    const shown=user || 'No answer';

    if ((Array.isArray(ans) && ans.length===0) || (!Array.isArray(ans) && String(ans).trim()==='')){
      total++; itemsOut.push({label, status:'‚Äî not graded ‚Äî', user:shown, correct:'(no key)'}); return;
    }

    total++; graded++;
    let ok=false; const correctText = Array.isArray(ans)? ans.join(', ') : ans;
    if(Array.isArray(ans)){
      const expected = ans.slice().sort();
      const picked = Array.from(document.querySelectorAll(`input[name='q25_26']:checked`)).map(x=>x.value).sort();
      ok = (picked.length===expected.length) && picked.every((v,i)=>v===expected[i]);
    } else {
      ok = shown.trim().toUpperCase() === String(ans).trim().toUpperCase();
    }
    if(ok) correctCount++;
    itemsOut.push({label, status: ok? '‚úì Correct' : '‚úó Incorrect', user:shown, correct:correctText});
  });

  document.getElementById('score').innerHTML=`Graded ${graded} of ${total} ‚Ä¢ Score: ${correctCount}/${graded}`;
  document.getElementById('answers').innerHTML=itemsOut.map(it=>`<li class="${/Correct/.test(it.status)?'ok':'bad'}">Q${it.label}: ${it.status} ‚Äî Your: <b>${it.user}</b> | Correct: <b>${it.correct}</b></li>`).join('');
  const r=document.getElementById('results'); r.style.display='block'; r.scrollIntoView({behavior:'smooth'});
}

/* Highlights */
const passageCard=document.getElementById('passageCard');
const pPalette=document.getElementById('pPalette');
passageCard.addEventListener('mouseup',(e)=>{
  const sel=window.getSelection(); if(!sel||sel.toString().trim().length===0) return;
  if(!passageCard.contains(sel.getRangeAt(0).commonAncestorContainer)) return;
  const r=passageCard.getBoundingClientRect(), x=Math.min(e.clientX-r.left,r.width-10), y=Math.max(0,e.clientY-r.top-40);
  pPalette.style.left=(r.left+x)+'px'; pPalette.style.top=(r.top+y)+'px'; pPalette.style.display='block';
});
document.addEventListener('mousedown',(e)=>{ if(!pPalette.contains(e.target)) pPalette.style.display='none'; });
pPalette.querySelectorAll('.hbtn[data-color]').forEach(btn=>{
  btn.addEventListener('click',()=>{ markSelection(btn.dataset.color, passageCard); pPalette.style.display='none'; });
});
document.getElementById('clearPMarks').addEventListener('click',()=>{
  passageCard.querySelectorAll('span.highlight').forEach(n=>{ const p=n.parentNode; while(n.firstChild) p.insertBefore(n.firstChild,n); p.removeChild(n); p.normalize(); });
  pPalette.style.display='none';
});

/* Question highlights */
const qCard=document.querySelector('.card.questions');
const qPalette=document.getElementById('qPalette');
qCard.addEventListener('mouseup',(e)=>{
  const sel=window.getSelection(); if(!sel||sel.toString().trim().length===0) return;
  if(!qCard.contains(sel.getRangeAt(0).commonAncestorContainer)) return;
  const node = sel.getRangeAt(0).commonAncestorContainer.nodeType===1 ? sel.getRangeAt(0).commonAncestorContainer : sel.getRangeAt(0).commonAncestorContainer.parentNode;
  if(node.closest && node.closest('input,textarea,select')) return;
  const r=qCard.getBoundingClientRect(), x=Math.min(e.clientX-r.left,r.width-10), y=Math.max(0,e.clientY-r.top-40);
  qPalette.style.left=(r.left+x)+'px'; qPalette.style.top=(r.top+y)+'px'; qPalette.style.display='block';
});
document.addEventListener('mousedown',(e)=>{ if(!qPalette.contains(e.target)) qPalette.style.display='none'; });
qPalette.querySelectorAll('.hbtn[data-color]').forEach(btn=>{
  btn.addEventListener('click',()=>{ markSelection(btn.dataset.color, qCard); qPalette.style.display='none'; });
});
document.getElementById('clearQMarks').addEventListener('click',()=>{
  qCard.querySelectorAll('span.highlight').forEach(n=>{ const p=n.parentNode; while(n.firstChild) p.insertBefore(n.firstChild,n); p.removeChild(n); p.normalize(); });
  qPalette.style.display='none';
});

/* Helper */
function markSelection(color, scope){
  const sel=window.getSelection(); if(!sel||!sel.rangeCount) return;
  const range=sel.getRangeAt(0);
  if(!scope.contains(range.commonAncestorContainer)) return;
  const container=range.commonAncestorContainer.nodeType===1? range.commonAncestorContainer : range.commonAncestorContainer.parentNode;
  if (container.closest && container.closest('input, textarea, select')) return;
  const frag=range.extractContents();
  const span=document.createElement('span'); span.className='highlight'; span.style.backgroundColor=color; span.appendChild(frag);
  range.insertNode(span); sel.removeAllRanges();
}

/* TG button */
document.querySelector('.tg').addEventListener('click',()=>window.open(CONFIG.telegramLink,'_blank'));
</script>
</body>
</html>
